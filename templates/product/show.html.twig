{% extends 'base.html.twig' %}

{% block title %}Product{% endblock %}

{% block body %}

    <h1>Product</h1>

    <table>
        <tr>
            <th>Id</th>
            <td>{{ product.id }}</td>
        </tr>
        <tr>
            <th>Title</th>
            <td>{{ product.title }}</td>
        </tr>
        <tr>
            <th>Description</th>
            <td>{{ product.description }}</td>
        </tr>
        <tr>
            <th>Price</th>
            <td>{{ product.price }}</td>
        </tr>
        <tr>
            <th>Summary</th>
            <td>{{ product.summary }}</td>
        </tr>
        <tr>
            <th>Photo</th>
            <td>{{ product.photo }}</td>
        </tr>
        <tr>
            <th>Ingredients</th>
            <td>{{ product.ingredients }}</td>
        </tr>

        <tr>
        <th>Reviews of this product</th>
            <td> {% for review in product.review %}
                    {% if is_granted('ROLE_USER')%}
                        <a href="{{  path('review_show',{'id': review.id }) }}"> {{ review.summary }} </a>
                        <br>

                    {% endif %}
                        {% if not is_granted('ROLE_USER') and review.isPublic == true %}
                            <a href="{{  path('review_show',{'id': review.id }) }}"> {{ review.summary }} </a>
                            <br>
                        {% endif %}

                {% endfor %}
        </td>
        </tr>
    </table>

    <a href="{{ path('product_index') }}">back to list</a>

    <a href="{{ path('product_edit', {'id': product.id}) }}">edit</a>

    {% include 'product/_delete_form.html.twig' with {'identifier': product.id} only %}

{% endblock %}